<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Marketo</title>
  <link href="https://www.contentstack.com/sdks/contentstack-ui-extensions/dist/latest/ui-extension-sdk.css" rel="stylesheet" type="text/css" media="all">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<!--   <link href="./style.css" rel="stylesheet" type="text/css" media="all">
 -->  <script src="https://www.contentstack.com/sdks/contentstack-ui-extensions/dist/latest/ui-extension-sdk.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.x-git.min.js"></script>
</head>

<body>
    <select class="form-control" id="form-select-field" style="display: none;">
          <option value="">-- Select a form --</option>
    </select>
  <script>
"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var extensionField=void 0,selectField=void 0,marketo={};function domChangeListner(n){selectField.on("change",function(){var t=$("#form-select-field").val(),e=n.find(function(e){return e.id.toString()===t});extensionField.field.setData(e)})}function render(e){var t=extensionField&&extensionField.field&&extensionField.field.getData()?extensionField.field.getData():{},n=$("select option:contains('-- Select a form --')"),i=t.id;e.forEach(function(e){var t=$("<option></option>").attr("value",e.id).text(e.name);e.id===i&&t.attr("selected","selected"),selectField.append(t)}),n.attr("disabled","disabled"),i||n.attr("selected","selected"),selectField.show(),domChangeListner(e)}var Marketo=function(){function i(e){var t=e.url,n=e.folder;_classCallCheck(this,i),this.url=t,this.folder=n}return _createClass(i,[{key:"getForms",value:function(){var i=this;return new Promise(function(t,n){var e=""+i.url;return i.folder&&(e=e+"?folder="+i.folder),fetch(e,{method:"GET"}).then(function(e){return e.json()}).then(function(e){return t(e)}).catch(function(e){n(e)})})}}]),i}();$(document).ready(function(){selectField=$("#form-select-field"),ContentstackUIExtension.init().then(function(e){(marketo=new Marketo((extensionField=e).config)).getForms().then(function(e){render(e)}),extensionField.window.enableAutoResizing()})});
</script>
</body>

</html>